{% extends "base_form.html" %}
{% load i18n static %}
{% load thumbnail %}

{% block title %}{% trans 'Profile' %}{% endblock %}

{% block nav_accounts_profile_class %}active{% endblock %}

{% block breadcrumb %}
<ol class="breadcrumb">
    <li><a href="{% url 'home' %}">{% trans 'Home' %}</a></li>
    <li class="active">{% trans 'User profile' %}</li>
</ol> 
{% endblock breadcrumb %}


{% block form %}

<form enctype="multipart/form-data" class="form-horizontal" method="post">{% csrf_token %}	
    <div class="">
	    <h3>{% trans 'My account' %}</h3>
		<p>{% trans "Update your user account." %}</p>
		
	    {% if messages %}{% for message in messages %}
	       <div class="alert alert-{% if message.tags %}{{ message.tags }}{% endif %}">{{ message }}</div>{% endfor %}
	    {% endif %}
		
	    {% if form.errors %}
	        <div class="alert alert-danger">
	        {% if form.errors|length == 1 %}{% trans "Please correct the error below." %}{% else %}{% trans "Please correct the errors below." %}{% endif %}
	        </div>
	    {% endif %}
    </div>
    
    {% include 'include/_field.html' with field=form.username %}
    {% include 'include/_field.html' with field=form.organisation %}
    {% include 'include/_field.html' with field=form.first_name %}
    {% include 'include/_field.html' with field=form.last_name %}
    {% include 'include/_field.html' with field=form.email %} 
    {% include 'include/_picture_field.html' with field=form.picture %} 
    
    <div class="row form-group">
	    <div class="col-sm-offset-3 col-sm-9">
            <a class="btn btn-default" href="{% url 'accounts:delete_profile' %}">{% trans 'Delete' %}</a>
	        <button type="submit" class="btn btn-primary">{% trans 'Save' %}</button>
	    </div>
    </div>
	
	<script type="text/javascript">document.getElementById("id_first_name").focus();</script>
	
	{% block extra_fields %}
	  {# Include the open_id fields #}
	  {% for key, value in openid_args.items  %}
	  <input type="hidden" name="{{ key }}" value="{{ value }}" />
	  {% endfor %}
	{% endblock %}
</form>

{% endblock %}

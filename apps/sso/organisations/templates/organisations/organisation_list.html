{% extends 'base_site.html' %}
{% load i18n list tz static %}

{% block title %}{% trans 'Center List' %}{% endblock %}

{% block nav_organisations_organisation_list_class %}active{% endblock %}

{% block breadcrumb %}
<ol class="breadcrumb">
    <li><a href="{% url 'home' %}">{% trans 'Home' %}</a></li>
    <li class="active">{% trans 'Center List' %}</li>
</ol> 
{% endblock breadcrumb %}
    
    
{% block content %}
<div class="row">
	<div class="col-sm-12">
	    {% if messages %}{% for message in messages %}
	       <div class="alert alert-{% if message.tags %}{{ message.tags }}{% endif %}">{{ message }}</div>{% endfor %}
	    {% endif %}
	</div>
</div><!-- /.row -->

<div class="row dwbn-filter-row">
	<div class="col-sm-3">
       {% include 'include/_search_form.html' %}
    </div>
	
	<div class="col-sm-9">
        {% if not user.is_superuser and user.get_administrable_organisations.exists %}
        {% if my_organisations %}
        <a type="button" class="btn btn-default active"  href="{% query_string cl 'my_organisations' '' %}">{% trans 'Select My Centers' %}</a>
        {% else %}
        <a type="button" class="btn btn-default" href="{% query_string cl 'my_organisations' 'True' 'p' %}">{% trans 'Select My Centers' %}</a>
        {% endif %}
        {% endif %}

        {% for filter in filters %} 
        {% include 'include/_list_filter.html' with filter=filter %}
        {% endfor %}
    </div><!-- /.col-sm-9 -->
</div>

<main>
    <div class="col-sm-12 table-responsive">
	   <table class="table table-bordered table-striped">
	       {% include "include/table_header.html" %}
	       <tbody>
	           {% for object in object_list %}
	           <tr> 
	               <td><a href="{% url 'organisations:organisation_detail' object.uuid %}">{{ object.name }}</a></td>
	               <td>{{ object.email|default_if_none:"" }}</td>
	               <td>{% if object.google_maps_url %}<a href="{{ object.google_maps_url }}">{% trans 'Google Maps' %} <span class="glyphicon glyphicon-map-marker"></span></a>{% endif %}</td>
	               <td>{{ object.country.iso2_code }}</td>
                   <td>{{ object.founded|date:"Y-m-d" }}</td>
	           </tr>
	           {% endfor %}
	       </tbody>
	   </table>
	   {% if is_paginated %}{% pagination page_obj cl %}{% endif %}
    </div>
</main>
{% endblock content %}
